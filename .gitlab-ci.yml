image: ubuntu:focal

stages:
  - build

build:
  variables:
    RUNNER_SCRIPT_TIMEOUT: 25m
  stage: build
  cache:
    key: rust-build
    paths:
      - target
  artifacts:
    paths:
      - tetrioplus.xpi
      - app.asar.zip
      - tetrio-plus_v*_for_desktop*.asar.zip
    expire_in: 1 week
  script:
    - ./scripts/build.sh
